<div class="container-fluid">

  <div class="py-10 px-10 mx-auto">
    <div class="row">
      <div class="col-lg-6 d-flex justify-content-start align-items-center">
        <p style="font-weight: 700;" class="h1 text-primary mb-12">Edit Benchmark Configuration</p>
      </div>
      <div class="col-lg-6 d-flex justify-content-end align-items-start ">
        <button (click)="runManualBenchmark()" class="btn btn-primary mx-4"><i class="bi bi-play-fill px-2"></i>Manual
          benchmark</button>
        <button (click)="runBenchmark()" class="btn btn-primary mx-4"><i class="bi bi-play-fill px-2"></i>Run New
          Benchmark</button>
      </div>
    </div>

    <div class="p-6">
      <div class="card shadow-none border-2 border-dashed border-primary-hover position-relative">
        <div class="d-flex justify-content-center px-5 py-5">
          <label for="screenRec_upload" class="position-absolute w-full h-full top-0 start-0 cursor-pointer">
            <input (change)="onScreenRecUpload($event)" id="screenRec_upload" name="screenRec_upload" type="file"
              class="visually-hidden">
          </label>
          <div class="text-center">
            <div class="d-flex m-3 align-items-center justify-content-center">
              <p class="h1 text-primary font-bold">Upload Screen Recorded video</p>
            </div>
            <p class="h2 text-gray text-muted m-3">
              Add the video with prompts here.
            </p>
            <div class="text-2xl m-3">
              <i class="bi bi-upload"></i>
            </div>
            <p class="h5 text-gray text-muted m-3">
              Click to upload a file.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="p-6">
      <div class="card shadow-none border-2 border-dashed border-primary-hover position-relative">
        <div class="d-flex justify-content-center px-5 py-5">
          <label for="rawVideo_upload" class="position-absolute w-full h-full top-0 start-0 cursor-pointer">
            <input (change)="onRawVideoUpload($event)" id="rawVideo_upload" name="rawVideo_upload" type="file"
              class="visually-hidden">
          </label>
          <div class="text-center">
            <div class="d-flex m-3 align-items-center justify-content-center">
              <p class="h1 text-primary font-bold">Upload Raw video</p>
            </div>
            <p class="h2 text-gray text-muted m-3">
              Add the video <span class="text-dark"><u>without</u></span> prompts here.
            </p>
            <div class="text-2xl m-3">
              <i class="bi bi-upload"></i>
            </div>
            <p class="h5 text-gray text-muted m-3">
              Click to upload a file.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="py-4">
      <div class="px-2 py-3 text-dark" style="font-weight: 600; line-height: 24px;">
        Prompts
      </div>
      <div class="table-responsive border rounded-3 table-border">
        <table class="table table-hover table-nowrap">
          <thead class="table-light">
            <tr>
              <th></th>
              <th scope="col">Prompt</th>
              <th scope="col">Initiation Time</th>
              <th scope="col">Completion Time</th>
              <th scope="col">Start Time</th>
              <th scope="col">End Time</th>
              <th scope="col">State</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let analytics of analyticsList">
              <td class="text-lg" scope="col">
                <div class="form-check">
                  <input class="form-check-input" name="prompt_radio" type="radio" value={{analytics.prompt.id}}
                    id="promptSelectRadio">
                  <!-- <label class="form-check-label" for="promptSelectRadio"></label> -->
                </div>
              </td>

              <td>
                {{analytics.prompt.type | titlecase}}
              </td>
              <td>
                {{'N/A'}}
              </td>
              <td>
                {{analytics.reaction.completionTimeInMs ? analytics.reaction.completionTimeInMs + ' ms' : 'N/A'}}
              </td>
              <td>
                {{analytics.prompt.timestamp}}
              </td>
              <td>
                {{analytics.result.timestamp}}
              </td>
              <td>

                <span *ngIf="analytics.result.type === 'success'"
                  class="badge rounded-pill text-xs bg-soft-success text-success">Success</span>
                <span *ngIf="analytics.result.type === 'failure'"
                  class="badge rounded-pill text-xs bg-soft-danger text-danger">Failure</span>
              </td>
              <td class="text-end">
                <div class="dropdown">
                  <a class="text-muted" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
                    <i class="bi bi-three-dots-vertical"></i>
                  </a>
                  <div class="dropdown-menu dropdown-menu-end">
                    <a href="#!" class="dropdown-item">
                      Action
                    </a>
                    <a href="#!" class="dropdown-item">
                      Another action
                    </a>
                    <a href="#!" class="dropdown-item">
                      Something else here
                    </a>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="py-4">
      <div class="px-2 py-3 text-dark" style="font-weight: 600; line-height: 24px;">
        All Benchmarks In This Configuration
      </div>

    <div class="date-filter">
      <mat-form-field appearance="standard">
        <mat-label>Enter a date range</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Start date" [value]="gameBenchmarkStartDate"
            (dateChange)="changeGameBenchmarksDates('start', $event.value)">
          <input matEndDate placeholder="End date" [value]="gameBenchmarkEndDate"
            (dateChange)="changeGameBenchmarksDates('end', $event.value)">
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
    </div>

      <div class="table-responsive border rounded-3 table-border">
        <table mat-table [dataSource]="benchmarkRunsListDataSource" class="mat-elevation-z8" matSort>
          <ng-container matColumnDef="activityName">
            <th mat-header-cell *matHeaderCellDef> Activity </th>
            <td mat-cell *matCellDef="let element"> {{ element.game.gameName.split('_').join(' ') | titlecase}} </td>
          </ng-container>

          <ng-container matColumnDef="completionTimeAbsAvg">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Avg. Completion Time Accuracy </th>
            <td mat-cell *matCellDef="let element"> {{element.completionTimeAbsAvg}} </td>
          </ng-container>

          <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Created At </th>
            <td mat-cell *matCellDef="let element"> {{getDateFromISOString(element.createdAt)}} </td>
          </ng-container>

          <ng-container matColumnDef="download">
            <th mat-header-cell *matHeaderCellDef> Download Report </th>
            <td mat-cell *matCellDef="let element">
              <button (click)="downloadBenchmarkReport(element.gameId)"
                class="btn btn-light text-primary text-sm download-btn">Download</button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="benchmarksDisplayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: benchmarksDisplayedColumns;"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
        </mat-paginator>

        </div>
    </div>
  </div>
</div>
